# HeapSort

comparison-based 알고리즘의 하나이다. Heap 을 이용하여 오름차순/내림차순 정렬을 한다. HeapSort 는 Heap 이 다음의 조건을 만족해야 한다.

1. maxHeap 에서는 모든 부모 노드들이 자식 노드보다 커야 한다.
2. minHeap 에서는 모든 부모 노드들이 자식 노드보다 작아야 한다.

Heap 을 한번 복습하고 다시 보면 좋을 것이다.

### 구현

기존의 Heap 을 확장하여 sort 도 가능하도록 한다.

[6,12,2,26,8,18,21,9,5]

이를 maxHeap 으로 바꾸면 다음과 같이 바뀐다.

[26,12,21,9,8,18,2,6,5] (읽을 때는 26 12,21 9,8,18,2 6,5 순서로 읽으면 된다.)

이제 이 배열을 오름차순 정렬해본다.

maxHeap 에서 root 는 항상 제일 크기 때문에, 첫번째 요소는 마지막 요소와 바뀔 수 있다(26과 5).

[5,12,21,9,8,18,2,6,26]

바뀜 이후에 첫번째 요소로 할당한 요소(5)가 적절한 위치에 올 때까지 siftDown 시킨다. 여기서 마지막 요소는 이미 sort 되었으므로 고려하지 않는다.

[21,12,18,9,8,5,2,6,26]

5를 siftDown 한 후에는 maxHeap 의 성질로 인해, 두 번째로 큰 21 이 새로운 root 가 된다(26을 제외했으므로). 새로운 마지막 요소인 6(26은 제외) 를 root 와 바꾼다.

[6,12,18,9,8,5,2,21,26]

6이 적당한 위치에 가도록 siftDown 한다. 위와 마찬가지로 21 부터는 sort 되었으므로 고려하지 않는다.

[18,12,6,9,8,5,2,21,26]

이제 정렬의 루틴을 설명할 수 있을 것 같다.

1. 첫번째와 마지막 요소를 뒤바꾼다. 뒤바뀌어서 뒤로 간 요소는 더 이상 고려하지 않는 것으로 한다.
2. 새로 부여된 첫번쨰 요소를 siftDown 해서 적당한 위치에 놓는다.
3. 더 이상 고려하지 않는 범위가 배열의 길이와 같아질 때까지 1-2 를 반복한다.

### 성능

O(n log n)이다.

### 키 포인트

* HeapSort 는 maxHeap 의 정렬 알고리즘을 향상시킨다.
* HeapSort 는 요소들을 아래의 패턴으로 정렬한다.
    1. 첫번째와 마지막 요소를 바꾼다.
    2. siftdown 을 통해 첫번째 요소를 Heap의 조건에 충족하도록 한다.
    3. 마지막 요소는 더 이상 고려하지 않는 상태에서 1-3을 반복한다.
